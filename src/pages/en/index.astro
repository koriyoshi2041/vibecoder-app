---
import Layout from '../../layouts/Layout.astro'
import ProgressDashboard from '../../components/ProgressDashboard'
import StageCard from '../../components/StageCard'
import AnimatedStat from '../../components/AnimatedStat'
import { stages } from '../../data/weeks.en'
import { t } from '../../i18n'

const locale = 'en' as const
---

<Layout title="VibeCoder Learn — Software Building for the AI Era" locale={locale}>
  <!-- Hero -->
  <section class="py-12 sm:py-20">
    <p class="reveal font-mono text-sm text-rust mb-4 tracking-widest uppercase">{t('home.subtitle', locale)}</p>
    <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold text-charcoal leading-tight mb-6 hero-title">
      {Array.from(t('home.title', locale)).map((char, i) => (
        <span class:list={['hero-char', { 'inline-block w-[0.3em]': char === ' ' }]} style={`animation-delay: ${i * 0.04 + 0.2}s`}>{char === ' ' ? '\u00A0' : char}</span>
      ))}
    </h1>
    <p class="reveal text-lg sm:text-xl text-charcoal-light max-w-2xl leading-relaxed mb-3" style="transition-delay: 0.5s">
      {t('home.desc', locale)} <strong class="text-charcoal">{t('home.desc.bold', locale)}</strong>.
    </p>
    <div class="reveal flex flex-wrap items-center gap-x-3 gap-y-1 text-sm text-warm-gray max-w-2xl" style="transition-delay: 0.7s">
      <span class="font-mono">{t('home.meta', locale)}</span>
    </div>
  </section>

  <!-- Dashboard -->
  <section class="reveal mb-16">
    <h2 class="text-xs font-mono text-warm-gray mb-5 uppercase tracking-widest">{t('home.progress', locale)}</h2>
    <ProgressDashboard client:visible locale="en" />
  </section>

  <!-- 4 Stages -->
  <section class="mb-16">
    <h2 class="reveal text-xs font-mono text-warm-gray mb-8 uppercase tracking-widest">{t('home.stages', locale)}</h2>
    <div class="reveal-stagger grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
      {stages.map((stage) => (
        <div class="reveal-child">
          <StageCard
            client:visible
            id={stage.id}
            label={stage.label}
            weeks={stage.weeks}
            color={stage.color}
            icon={stage.icon}
            description={stage.description}
            locale="en"
          />
        </div>
      ))}
    </div>
  </section>

  <!-- Key Stats -->
  <section class="mb-16">
    <h2 class="reveal text-xs font-mono text-warm-gray mb-8 uppercase tracking-widest">{t('home.stats', locale)}</h2>
    <div class="reveal-stagger grid grid-cols-1 sm:grid-cols-3 gap-5">
      <div class="reveal-child">
        <AnimatedStat
          client:visible
          value={45}
          suffix="%"
          color="dusty-rose"
          label={t('home.stat1.desc', locale)}
          sublabel={t('home.stat1.source', locale)}
        />
      </div>
      <div class="reveal-child">
        <AnimatedStat
          client:visible
          value={80}
          suffix="%"
          color="sage"
          label={t('home.stat2.desc', locale)}
          sublabel={t('home.stat2.source', locale)}
        />
      </div>
      <div class="reveal-child">
        <AnimatedStat
          client:visible
          value={19}
          suffix="%"
          color="bronze"
          label={t('home.stat3.desc', locale)}
          sublabel={t('home.stat3.source', locale)}
        />
      </div>
    </div>
  </section>

  <!-- Quick Links -->
  <section class="mb-12">
    <h2 class="reveal text-xs font-mono text-warm-gray mb-8 uppercase tracking-widest">{t('home.explore', locale)}</h2>
    <div class="reveal-stagger grid grid-cols-1 sm:grid-cols-3 gap-5">
      <a href="/en/path" class="reveal-child group card-elevated bg-paper rounded-lg p-6 border border-light-beige hover:border-rust/40">
        <p class="font-mono text-xs text-rust mb-3 tracking-wide">{t('home.link.path.label', locale)}</p>
        <h3 class="font-bold text-lg text-charcoal group-hover:text-rust transition-colors mb-2">{t('home.link.path.title', locale)}</h3>
        <p class="text-sm text-warm-gray leading-relaxed">{t('home.link.path.desc', locale)}</p>
        <span class="inline-block mt-4 text-xs font-mono text-rust opacity-0 group-hover:opacity-100 transition-opacity duration-300">Explore →</span>
      </a>
      <a href="/en/challenges" class="reveal-child group card-elevated bg-paper rounded-lg p-6 border border-light-beige hover:border-rust/40">
        <p class="font-mono text-xs text-rust mb-3 tracking-wide">{t('home.link.challenges.label', locale)}</p>
        <h3 class="font-bold text-lg text-charcoal group-hover:text-rust transition-colors mb-2">{t('home.link.challenges.title', locale)}</h3>
        <p class="text-sm text-warm-gray leading-relaxed">{t('home.link.challenges.desc', locale)}</p>
        <span class="inline-block mt-4 text-xs font-mono text-rust opacity-0 group-hover:opacity-100 transition-opacity duration-300">Explore →</span>
      </a>
      <a href="/en/projects" class="reveal-child group card-elevated bg-paper rounded-lg p-6 border border-light-beige hover:border-rust/40">
        <p class="font-mono text-xs text-rust mb-3 tracking-wide">{t('home.link.projects.label', locale)}</p>
        <h3 class="font-bold text-lg text-charcoal group-hover:text-rust transition-colors mb-2">{t('home.link.projects.title', locale)}</h3>
        <p class="text-sm text-warm-gray leading-relaxed">{t('home.link.projects.desc', locale)}</p>
        <span class="inline-block mt-4 text-xs font-mono text-rust opacity-0 group-hover:opacity-100 transition-opacity duration-300">Explore →</span>
      </a>
    </div>
  </section>
</Layout>
